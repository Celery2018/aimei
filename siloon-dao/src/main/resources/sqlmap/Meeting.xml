<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
        "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="MEETING">

    <typeAlias alias="Meeting" type="com.siloon.domain.Meeting"/>

    <resultMap id="Meeting_Map" class="Meeting">
        <result property="id" column="ID"/>
        <result property="protocolHostStartUrl" column="protocolHostStartUrl"/>
        <result property="hostStartUrl" column="hostStartUrl"/>
        <result property="confStatus" column="confStatus"/>
        <result property="confPassword" column="confPassword" />
        <result property="optionJbh" column="optionJbh"/>
        <result property="startTime" column="startTime" jdbcType="DATETIME" javaType="java.lang.String"/>
        <result property="actualTime" column="actualTime" jdbcType="DATETIME" javaType="java.lang.String"/>
        <result property="optionVideoParticipants" column="optionVideoParticipants"/>
        <result property="confId" column="confId"/>
        <result property="duration" column="duration"/>
        <result property="protocolJoinUrl" column="protocolJoinUrl"/>
        <result property="userId" column="userId"/>
        <result property="userName" column="userName"/>
        <result property="confName" column="confName"/>
        <result property="confParties" column="confParties"/>
        <result property="joinUrl" column="joinUrl"/>
        <result property="confDelFlag" column="confDelFlag"/>
        <result property="optionVideoHost" column="optionVideoHost"/>
        <result property="confNumber" column="confNumber"/>
        <result property="roomId" column="roomId"/>
        <result property="timeZone" column="timeZone"/>
        <result property="remark" column="remark"/>
        <result property="rcIps" column="rcIps"/>
        <result property="h323pwd" column="h323pwd"/>
        <result property="isPush" column="isPush"/>
    </resultMap>

    <sql id="COLUMNS">
        id,protocolHostStartUrl,
        hostStartUrl,confStatus,
        confPassword,optionJbh,
        startTime,actualTime,optionVideoParticipants,
        confId,duration,
        protocolJoinUrl,userId,
        userName,confName,
        confParties,joinUrl,
        confDelFlag,optionVideoHost,
        confNumber,roomId,
        timeZone,remark,
        rcIps,h323pwd,
        isPush
    </sql>

    <sql id="TABEL_NAME">conference</sql>

    <sql id="COMMON_SQL">
        <dynamic prepend=" WHERE ">
            <isNotEmpty prepend=" AND " property="id">id=#id#</isNotEmpty>
            <isNotEmpty prepend=" AND " property="carKey">carKey like concat('%', #carKey#, '%')</isNotEmpty>
        </dynamic>
    </sql>


    <sql id="PAGE_QUEREY_SQL">
        <dynamic prepend=" LIMIT ">
            <isNotEmpty prepend=" " property="startIndex">#startIndex#</isNotEmpty>
            <isNotEmpty prepend=" , " property="pageSize">#pageSize#</isNotEmpty>
        </dynamic>
    </sql>

    <!-- 更新的动态set列表 -->
    <sql id="UPDATE_SQL">
        <dynamic prepend=" SET ">
            <isNotEmpty prepend=" " property="protocolHostStartUrl">protocolHostStartUrl=#protocolHostStartUrl#</isNotEmpty>
            <isNotEmpty prepend="," property="hostStartUrl">hostStartUrl=#hostStartUrl#</isNotEmpty>
            <isNotEmpty prepend="," property="confStatus">confStatus=#confStatus#</isNotEmpty>
            <isNotEmpty prepend="," property="confPassword">confPassword=#confPassword#</isNotEmpty>
            <isNotEmpty prepend="," property="optionJbh">optionJbh=#optionJbh#</isNotEmpty>
            <isNotEmpty prepend="," property="startTime">startTime=#startTime#</isNotEmpty>
            <isNotEmpty prepend="," property="actualTime">actualTime=#actualTime#</isNotEmpty>
            <isNotEmpty prepend="," property="optionVideoParticipants">optionVideoParticipants=#optionVideoParticipants#</isNotEmpty>
            <isNotEmpty prepend="," property="confId">confId=#confId#</isNotEmpty>
            <isNotEmpty prepend="," property="duration">duration=#duration#</isNotEmpty>
            <isNotEmpty prepend="," property="protocolJoinUrl">protocolJoinUrl=#protocolJoinUrl#</isNotEmpty>
            <isNotEmpty prepend="," property="userId">userId=#userId#</isNotEmpty>
            <isNotEmpty prepend="," property="userName">userName=#userName#</isNotEmpty>
            <isNotEmpty prepend="," property="confName">confName=#confName#</isNotEmpty>
            <isNotEmpty prepend="," property="confParties">confParties=#confParties#</isNotEmpty>
            <isNotEmpty prepend="," property="joinUrl">joinUrl=#joinUrl#</isNotEmpty>
            <isNotEmpty prepend="," property="confDelFlag">confDelFlag=#confDelFlag#</isNotEmpty>
            <isNotEmpty prepend="," property="optionVideoHost">optionVideoHost=#optionVideoHost#</isNotEmpty>
            <isNotEmpty prepend="," property="confNumber">confNumber=#confNumber#</isNotEmpty>
            <isNotEmpty prepend="," property="roomId">roomId=#roomId#</isNotEmpty>
            <isNotEmpty prepend="," property="timeZone">timeZone=#timeZone#</isNotEmpty>
            <isNotEmpty prepend="," property="remark">remark=#remark#</isNotEmpty>
            <isNotEmpty prepend="," property="rcIps">rcIps=#rcIps#</isNotEmpty>
            <isNotEmpty prepend="," property="h323pwd">h323pwd=#h323pwd#</isNotEmpty>
            <isNotEmpty prepend="," property="isPush">isPush=#isPush#</isNotEmpty>
        </dynamic>
    </sql>

    <!-- 新增 -->
    <insert id="ADD" parameterClass="Meeting">
        INSERT INTO
        <include refid="TABEL_NAME"/>
        (id,protocolHostStartUrl,
        hostStartUrl,confStatus,
        confPassword,optionJbh,
        startTime,actualTime,optionVideoParticipants,
        confId,duration,
        protocolJoinUrl,userId,
        userName,confName,
        confParties,joinUrl,
        confDelFlag,optionVideoHost,
        confNumber,roomId,
        timeZone,remark,rcIps,h323pwd,isPush)
        VALUES(#id#,#protocolHostStartUrl#,
        #hostStartUrl#,#confStatus#,
        #confPassword#,#optionJbh#,
        #startTime#,#actualTime#,#optionVideoParticipants#,
        #confId#,#duration#,
        #protocolJoinUrl#,#userId#,
        #userName#,#confName#,
        #confParties#,#joinUrl#,
        #confDelFlag#,#optionVideoHost#,
        #confNumber#,#roomId#,
        #timeZone#,#remark#,#rcIps#,#h323pwd#,#isPush#)
        <selectKey resultClass="int" keyProperty="id">
            SELECT @@IDENTITY AS ID
        </selectKey>
    </insert>
    <!-- 根据carkey更新某一项的数据 -->
    <update id="UPDATE" parameterClass="Meeting">
        UPDATE
        <include refid="TABEL_NAME"/>

        <include refid="UPDATE_SQL"/>
        WHERE id = #id#
    </update>
    <!-- 根据carkey删除某一项的数据 -->
    <delete id="DELETE_BY_CONFID" parameterClass="Meeting">
        DELETE
        FROM
        <include refid="TABEL_NAME"/>
        WHERE confId=#confId#
    </delete>


    <!-- 根据confId查询 -->
    <select id="FIND_BY_CONFID" resultMap="Meeting_Map" parameterClass="Meeting">
        SELECT
        <include refid="COLUMNS"/>
        FROM
        <include refid="TABEL_NAME"/>
        WHERE
        <isNotEmpty prepend="" property="confId">confId = #confId#</isNotEmpty>
    </select>

    <!-- 根据confId查询 -->
    <select id="FIND_ALL" resultMap="Meeting_Map">
        SELECT
        <include refid="COLUMNS"/>
        FROM
        <include refid="TABEL_NAME"/>
    </select>


</sqlMap>